<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<#include "/header.html" />
<body>
	<div class="layui-fluid">
		<div class="layui-row">
			<div class="layui-card">
				<div id="storeInfoForm"  lay-filter="storeInfoForm" class="layui-form"  style="padding: 20px 30px 0 0;">
					<div class="layui-form-item">
						<input type="hidden" id="storeId" name="storeId" value="${storeId}">
						<label class="layui-form-label">柜台名称</label>
						<div class="layui-input-inline"> 
							<input type="text" name="counterName" lay-verify="required" placeholder="柜台名称" class="layui-input" >
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">柜台类型</label>
						<div class="layui-input-inline">
							 <select name="counterType" lay-filter='storeType' lay-verify="required">
						        <option value="">请选择类型</option>
						        <option value="0">成品柜台</option>
						        <option value="1">旧料柜台</option>
						      </select>
						</div>
					</div>				
					<div class="layui-form-item">
						<label class="layui-form-label">状态</label>
						<div class="layui-input-inline">
							<input type="checkbox" name="status" lay-skin="switch" value="1" lay-text="启用|停用" checked>
						</div>
					</div>
					<div class="layui-form-item layui-hide">
				      <input type="button" lay-submit lay-filter="submitForm" id="submitForm" value="确认添加">
				      <input type="button" lay-submit lay-filter="layuiadmin-app-form-edit" id="layuiadmin-app-form-edit" value="确认编辑">
				    </div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="resource/layui/layui.all.js?v=1"></script>
<script>
	!function(){
		var $ = layui.$, form = layui.form;
		form.on('submit(submitForm)', function(data) {
			var field = data.field; //获取提交的字段
			var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
			//提交 Ajax 成功后，关闭当前弹层并重载表格
			$.ajax({
		        type: "POST",
		        url: "sysCounter/saveCounter.do",
		        dataType: 'json',
		        async: false,
		        data: field,
		        success: function(data) {
		            if (data.status == '100') {
		            	layer.alert("保存成功");
		            	parent.layui.table.reload('counterList'); //重载表格
		            	parent.layer.close(index); //再执行关闭 
		            }else{
		            	layer.alert("获取基础信息失败");
		            }
		        },
		        error: function() {
		        }
		    });
		});
		
		
	}();
</script>
</html>

