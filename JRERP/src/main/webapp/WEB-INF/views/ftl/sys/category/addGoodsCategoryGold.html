<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<#include "/headerPop.html" />
<body>
	<div class="layui-fluid">
		<div class="layui-row">
			<div class="layui-card">
				<div id="storeInfoForm"  lay-filter="storeInfoForm" class="layui-form layui-form-pane no-padding padding-top-10">
					<div class="layui-form-item">
						<input type="hidden" id="id" name="id" value="${id}">
						<div class="layui-inline">
							<label class="layui-form-label">系统编码</label>
							<div class="layui-input-inline" style="width: 130px;"> 
								<input type="text" name="systemCode" class="layui-input">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">商品大类</label>
							<div class="layui-input-inline" style="width: 130px;"> 
								<input type="text" name="systemCode" class="layui-input">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">商品中类</label>
							<div class="layui-input-inline" style="width: 130px;"> 
								<input type="text" name="systemCode" class="layui-input">
							</div>
						</div>
					</div>
					<div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label">金料名</label>
					      <div class="layui-input-inline" style="width: 130px;">
					        <input type="text" name="number" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label">石料名</label>
					      <div class="layui-input-inline" style="width: 130px;">
					        <input type="text" name="date" id="date" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label">品名</label>
					      <div class="layui-input-inline" style="width: 130px;">
					        <input type="tel" name="url" class="layui-input" >
					      </div>
					    </div>
					</div>
					<div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label">商品名称</label>
					      <div class="layui-input-inline" style="width: 130px;">
					        <input type="text" name="number" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label">缩写</label>
					      <div class="layui-input-inline" style="width: 130px;">
					        <input type="text" name="date" id="date" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label">标签名称</label>
					      <div class="layui-input-inline" style="width: 130px;">
					        <input type="tel" name="url" class="layui-input" >
					      </div>
					    </div>
					</div>					
					<div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label">标签模板</label>
					      <div class="layui-input-inline" style="width: 130px;">
					        <input type="text" name="number" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label">标签名称</label>
					      <div class="layui-input-inline" style="width: 130px;">
					        <input type="tel" name="url" class="layui-input" >
					      </div>
					    </div>
					      <input type="checkbox" name="like[write]" title="写作"><div class="layui-unselect layui-form-checkbox layui-form-checked"><span>写作</span><i class="layui-icon layui-icon-ok"></i></div>
					      <input type="checkbox" name="like[read]" title="阅读"><div class="layui-unselect layui-form-checkbox layui-form-checked"><span>阅读</span><i class="layui-icon layui-icon-ok"></i></div>
					      <input type="checkbox" name="like[daze]" title="发呆"><div class="layui-unselect layui-form-checkbox"><span>发呆</span><i class="layui-icon layui-icon-ok"></i></div>
					</div>
					<div class="layui-form-item layui-hide">
				      <input type="button" lay-submit lay-filter="submitForm" id="submitForm" value="确认添加">
				      <input type="button" lay-submit lay-filter="layuiadmin-app-form-edit" id="layuiadmin-app-form-edit" value="确认编辑">
				    </div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="resource/layui/layui.all.js?v=1"></script>
<script>
	!function(){
		var $ = layui.$, form = layui.form;
		var active={
				initElement:function(){
					$.ajax({
				        type: "POST",
				        url: "sysElement/getElements.do",
				        dataType: 'json',
				        async: false,
				        data: "elements=areaInfo&elements=storeInfo",
				        success: function(data) {
				            if (data.status == '100') {
				            	var regionInfo = data.data.areaInfo;
				            	if(regionInfo){
				            		for(var i=0;i<regionInfo.length;i++){
				            			var temp=regionInfo[i];
						            	$("#regionCode").append("<option value='"+temp.areaCode+"'>"+temp.areaName+"</option>");
				            		}
				            	}
				            	form.render('select')
				            }else{
				            	layer.alert("获取基础信息失败");
				            }
				        },
				        error: function() {
				        }
				    });
				},
				getFormData:function(){
					var id =$("#id").val();
					if(id){
						$.ajax({
					        type: "POST",
					        url: "sysStore/getStoreInfoData.do",
					        dataType: 'json',
					        async: false,
					        data: "id="+id,
					        success: function(data) {
					            if (data.status == '100') {
					            	form.val("storeInfoForm", data.data)
					            }else{
					            	layer.alert("获取基础信息失败");
					            }
					        },
					        error: function() {
					        }
					    });
					}
				}
			}
		active.initElement();
		active.getFormData();
		form.on('submit(submitForm)', function(data) {
			var field = data.field; //获取提交的字段
			var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
			//提交 Ajax 成功后，关闭当前弹层并重载表格
			$.ajax({
		        type: "POST",
		        url: "sysStore/saveStore.do",
		        dataType: 'json',
		        async: false,
		        data: field,
		        success: function(data) {
		            if (data.status == '100') {
		            	layer.alert("保存成功");
		            	parent.layui.table.reload('storeList'); //重载表格
		            	parent.layer.close(index); //再执行关闭 
		            }else{
		            	layer.alert("获取基础信息失败");
		            }
		        },
		        error: function() {
		        }
		    });
		});
		
		
	}();
</script>
</html>

